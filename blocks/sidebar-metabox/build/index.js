!function(){"use strict";var e={n:function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,{a:a}),a},d:function(t,a){for(var l in a)e.o(a,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:a[l]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.element,a=window.wp.i18n,l=window.wp.plugins,n=window.wp.editPost,r=window.wp.data,o=window.wp.components,i=window.wp.apiFetch,s=e.n(i),m=window.wp.coreData,c=window.wp.blockEditor,d=e=>{const{image:{id:l,url:n},mimtype:i="image",onSelectImage:s}=e,d=(0,r.useSelect)((e=>l&&e(m.store).getMedia(l,{context:"view"})),[l]);return(0,t.createElement)(o.BaseControl,null,(0,t.createElement)("div",{className:"editor-post-featured-image"},(0,t.createElement)(c.MediaUploadCheck,null,(0,t.createElement)(c.MediaUpload,{onSelect:s,value:l,allowedTypes:[i],render:e=>{let{open:r}=e;return(0,t.createElement)(o.Button,{className:l?"editor-post-featured-image__preview":"editor-post-featured-image__toggle",onClick:r},!l&&(0,a.__)("Choose an image","savvy-blocks"),!!l&&d&&(0,t.createElement)(o.ResponsiveWrapper,{naturalWidth:d.media_details.width,naturalHeight:d.media_details.height},(0,t.createElement)("img",{src:n,alt:"image"})))}})),!!l&&(0,t.createElement)(c.MediaUploadCheck,null,(0,t.createElement)(c.MediaUpload,{title:(0,a.__)("Replace image","savvy-blocks"),value:l,onSelect:s,allowedTypes:[i],render:e=>{let{open:l}=e;return(0,t.createElement)(o.Button,{onClick:l,isDefault:!0,isLarge:!0},(0,a.__)("Replace image","savvy-blocks"))}})),!!l&&(0,t.createElement)(c.MediaUploadCheck,null,(0,t.createElement)(o.Button,{onClick:()=>s({id:0,url:""}),isLink:!0,isDestructive:!0},(0,a.__)("Remove image","savvy-blocks")))))};const{useSelect:p}=wp.data;var u=e=>{const{media:{id:l,url:n},allowedTypes:i,onSelectMedia:s}=e,d=(0,r.useSelect)((e=>l&&e(m.store).getMedia(l)),[l]);return(0,t.createElement)(o.BaseControl,null,(0,t.createElement)("div",{className:"editor-post-featured-media"},(0,t.createElement)(c.MediaUploadCheck,null,!d&&(0,t.createElement)(c.MediaUpload,{onSelect:s,value:l,allowedTypes:i||["video","audio"],render:e=>{let{open:n}=e;return(0,t.createElement)(o.Button,{onClick:n,isDefault:!0,isLarge:!0},!l&&(0,a.__)("Choose a media","savvy-blocks"))}}),!!l&&d&&(0,t.createElement)(t.Fragment,null,d?.mime_type?.match("video.*")&&(0,t.createElement)(o.ResponsiveWrapper,{naturalWidth:d.media_details.width,naturalHeight:d.media_details.height},(0,t.createElement)("video",{controls:!0},(0,t.createElement)("source",{src:n,type:d?.mime_type}))),d?.mime_type?.match("image.*")&&(0,t.createElement)(o.ResponsiveWrapper,{naturalWidth:d.media_details.width,naturalHeight:d.media_details.height},(0,t.createElement)("img",{src:n,alt:"image"})),!d?.mime_type?.match("image.*|video.*")&&(0,t.createElement)("span",{style:{color:"#fff",display:"block",padding:"5px",margisvottom:"5px",backgroundColor:"#007cba"}},d?.title?.rendered)),!!l&&(0,t.createElement)(o.Flex,{style:{marginTop:16}},(0,t.createElement)(c.MediaUpload,{title:(0,a.__)("Replace media","savvy-blocks"),value:l,onSelect:s,allowedTypes:i||["video","audio"],render:e=>{let{open:l}=e;return(0,t.createElement)(o.Button,{onClick:l,isDefault:!0,isLarge:!0},(0,a.__)("Replace media","savvy-blocks"))}}),(0,t.createElement)(o.Button,{onClick:()=>s({id:0,url:""}),isLink:!0,isDestructive:!0},(0,a.__)("Remove media","savvy-blocks"))))))};const v={string:e=>{var l;const{label:n,metaKey:r,postType:i,editable:s}=e,[c,d]=(0,m.useEntityProp)("postType",i,"meta"),p=null!==(l=c?.[r])&&void 0!==l?l:"";return(0,t.createElement)(t.Fragment,null,s?(0,t.createElement)(o.TextControl,{label:(0,a.__)(n,"savvy-blocks"),value:p,onChange:e=>{d({...c,[r]:e})}}):(0,t.createElement)(o.__experimentalText,{color:"#888888",upperCase:!0,isBlock:!0},p||"-"))},boolean:e=>{var l;const{label:n,metaKey:r,postType:i,editable:s}=e,[c,d]=(0,m.useEntityProp)("postType",i,"meta"),p=null!==(l=c?.[r])&&void 0!==l&&l;return(0,t.createElement)(t.Fragment,null,s?(0,t.createElement)(o.ToggleControl,{label:(0,a.__)(n,"savvy-blocks"),checked:p,onChange:e=>{d({...c,[r]:e})}}):(0,t.createElement)(o.__experimentalText,{color:"#888888",isBlock:!0},p?"True":"False"))},number:e=>{var l;const{label:n,metaKey:r,postType:i,editable:s}=e,[c,d]=(0,m.useEntityProp)("postType",i,"meta"),p=null!==(l=c?.[r])&&void 0!==l?l:"";return(0,t.createElement)(t.Fragment,null,s?(0,t.createElement)(o.__experimentalNumberControl,{label:(0,a.__)(n,"savvy-blocks"),value:p,onChange:e=>{d({...c,[r]:e})}}):(0,t.createElement)(o.__experimentalText,{color:"#888888",isBlock:!0},p||"-"))},integer:e=>{var l;const{label:n,metaKey:r,postType:i,editable:s}=e,[c,d]=(0,m.useEntityProp)("postType",i,"meta"),p=null!==(l=c?.[r])&&void 0!==l?l:"";return(0,t.createElement)(t.Fragment,null,s?(0,t.createElement)(o.NumberControl,{label:(0,a.__)(n,"savvy-blocks"),value:p,onChange:e=>{d({...c,[r]:e})}}):(0,t.createElement)(o.__experimentalText,{color:"#888888",isBlock:!0},p||"-"))},image:e=>{var a;const{label:l,metaKey:n,postType:r,editable:i}=e,[s,c]=(0,m.useEntityProp)("postType",r,"meta"),p=null!==(a=s?.[n])&&void 0!==a&&a;return(0,t.createElement)(t.Fragment,null,i?(0,t.createElement)(d,{image:{id:p?.id,url:p?.url},onSelectImage:e=>{return t={id:e.id,url:e.url},void c({...s,[n]:t});var t}}):(0,t.createElement)(o.ResponsiveWrapper,null,(0,t.createElement)("img",{src:p.url,alt:"image"})))},media:e=>{var a;const{label:l,metaKey:n,postType:i,editable:s}=e,[c,d]=(0,m.useEntityProp)("postType",i,"meta"),p=null!==(a=c?.[n])&&void 0!==a&&a,v=(0,r.useSelect)((e=>p?.id&&e(m.store).getMedia(p?.id)),[p?.id]);return(0,t.createElement)(t.Fragment,null,s?(0,t.createElement)(u,{allowedTypes:["video","image"],media:{id:p?.id,url:p?.url},onSelectMedia:e=>{return t={id:e.id,url:e.url},void d({...c,[n]:t});var t}}):(0,t.createElement)(t.Fragment,null,v?.mime_type?.match("video.*")&&(0,t.createElement)(o.ResponsiveWrapper,{naturalWidth:v.media_details.width,naturalHeight:v.media_details.height},(0,t.createElement)("video",{controls:!0},(0,t.createElement)("source",{src:v?.source_url,type:v?.mime_type}))),v?.mime_type?.match("image.*")&&(0,t.createElement)(o.ResponsiveWrapper,{naturalWidth:v.media_details.width,naturalHeight:v.media_details.height},(0,t.createElement)("img",{src:v?.source_url,alt:"image"})),!v?.mime_type?.match("image.*|video.*")&&(0,t.createElement)("span",{style:{color:"#fff",display:"block",padding:"5px",margisvottom:"5px",backgroundColor:"#007cba"}},v?.title?.rendered)))},select:e=>{var l;const{label:n,metaKey:r,postType:i,editable:s}=e,[c,d]=(0,m.useEntityProp)("postType",i,"meta"),p=null!==(l=c?.[r])&&void 0!==l&&l,u=svCustomFields?.[`select_meta_${r}`]?svCustomFields[`select_meta_${r}`]?.split(","):[];return(0,t.createElement)(t.Fragment,null,s?(0,t.createElement)(o.SelectControl,{label:(0,a.__)(n,"savvy-blocks"),value:p,options:[{label:"-",value:""},...u.map((e=>({label:e,value:e})))],onChange:e=>{d({...c,[r]:e})}}):(0,t.createElement)(o.__experimentalText,{color:"#888888",isBlock:!0},p||"-"))},post_type:e=>{var l;const{label:n,metaKey:r,postType:i,editable:s}=e,[c,d]=(0,t.useState)([]),[u,v]=(0,t.useState)([]),[g,y]=(0,m.useEntityProp)("postType",i,"meta"),E=null!==(l=g?.[r])&&void 0!==l&&l,_=p((e=>e("core").getEntityRecords("postType",r))),b=p((e=>e("core").getEntityRecord("postType","post",E)),[E]);return(0,t.useEffect)((()=>{v(_?.map((e=>({value:e.id,label:e.title?.raw||"no title"}))))}),[_]),(0,t.useEffect)((()=>{u?.length&&d(u)}),[u]),(0,t.createElement)(t.Fragment,null,s?(0,t.createElement)(o.ComboboxControl,{label:(0,a.__)(n,"savvy-blocks"),value:E,onChange:e=>{y({...g,[r]:e})},options:c,onFilterValueChange:e=>d(u.filter((t=>t.label.toLowerCase().includes(e.toLowerCase()))))}):(0,t.createElement)(o.Flex,null,(0,t.createElement)(o.ExternalLink,{href:b?.link},b?.title?.rendered)))}};(0,l.registerPlugin)("savvy-blocks-meta-sidebar-panel",{icon:"",render:()=>{const e=[],[l,i]=(0,t.useState)([]),m=(0,r.useSelect)((e=>e("core/editor").getCurrentPostType()),[]);return(0,t.useEffect)((()=>{s()({path:`/savvy/v1/post-metas/${m}`}).then((e=>{i(e)}))}),[]),l.map((l=>{const n=v[l.type];l.show_in_sidebar&&e.push((0,t.createElement)(o.BaseControl,{label:(0,a.__)(l.name,"savvy-blocks")},(0,t.createElement)(n,{metaKey:l.meta_key,postType:m,editable:l.editable})))})),e.length&&(0,t.createElement)(n.PluginDocumentSettingPanel,{className:"meta-sidebar-setting-panel",title:"Custom Meta"},e)}})}();